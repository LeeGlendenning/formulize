<{* form elements must be named with their object name hyphen field name *}>
<{* no other elements should have hyphens, since that tells the saving system that this is a property of an object to update *}>
<{* formulize_admin_handler and formulize_admin_key are required, to tell what the name of the save handling file is, and what the key is that we're inserting/updating on *}>
<style>

body {
    font-family: Verdana, Arial, sans-serif;
    font-size: 12px;
}
.button {
	border-style:solid;
	border-radius:4px;
	border-color:#0099FF;
    background-color: #70B8FF;
    padding: 5px,5px,5px,5px;
    color: #000;
    font-size: 17px;
    text-decoration: none;
    cursor: pointer;
	box-shadow: 1px 2px 1px #888888;
}

.button:hover {
    background:#C6E3FF;
    box-shadow: 0px 0px 1px #777;    
}
.container{
	position: relative;
	top:0px;
}
#accordion-2-list.hidden{
	position:absolute;
	top:0px;
}
#sortable-list{
	position: relative;

}
</style>


<form class="formulize-admin-form">
<input type="hidden" name="formulize_admin_handler" value="form_elements">
<input type="hidden" name="formulize_admin_key" value="<{$content.fid}>">
<input type="hidden" name="cloneelement" value="">
<input type="hidden" name="deleteelement" value="">
<input type="hidden" name="convertelement" value="">
<input type="hidden" name="reload_elements" value="">
<input type="hidden" name="aid" value="<{$content.aid}>">	
<input type="hidden" name="elementorder" value="">	
<input type="hidden" name="element-list-order" value="">	
	
<div class="accordion-box">
	<h2><{$smarty.const._AM_ELE_ADDINGTOFORM}></h2>
	<p><{$smarty.const._AM_ELE_CLICKTOADD}></p>
			<p><a href="ui.php?page=element&ele_id=new&fid=<{$content.fid}>&aid=<{$content.aid}>&type=text"><img src="../images/filenew2.png"> <{$smarty.const._AM_ELE_TEXT}></a></p>
			<p><a href="ui.php?page=element&ele_id=new&fid=<{$content.fid}>&aid=<{$content.aid}>&type=textarea"><img src="../images/filenew2.png"> <{$smarty.const._AM_ELE_MLTEXT}></a></p>
			<p><a href="ui.php?page=element&ele_id=new&fid=<{$content.fid}>&aid=<{$content.aid}>&type=areamodif"><img src="../images/filenew2.png"> <{$smarty.const._AM_ELE_MODIF}></a></p>
			<p><a href="ui.php?page=element&ele_id=new&fid=<{$content.fid}>&aid=<{$content.aid}>&type=ib"><img src="../images/filenew2.png"> <{$smarty.const._AM_ELE_MODIF_ONE}></a></p>
			<p><a href="ui.php?page=element&ele_id=new&fid=<{$content.fid}>&aid=<{$content.aid}>&type=select"><img src="../images/filenew2.png"> <{$smarty.const._AM_ELE_SELECTEXPLAIN}></a></p>
			<p><a href="ui.php?page=element&ele_id=new&fid=<{$content.fid}>&aid=<{$content.aid}>&type=checkbox"><img src="../images/filenew2.png"> <{$smarty.const._AM_ELE_CHECK}></a></p>
			<p><a href="ui.php?page=element&ele_id=new&fid=<{$content.fid}>&aid=<{$content.aid}>&type=radio"><img src="../images/filenew2.png"> <{$smarty.const._AM_ELE_RADIO}></a></p>
			<p><a href="ui.php?page=element&ele_id=new&fid=<{$content.fid}>&aid=<{$content.aid}>&type=yn"><img src="../images/filenew2.png"> <{$smarty.const._AM_ELE_YN}></a></p>
			<p><a href="ui.php?page=element&ele_id=new&fid=<{$content.fid}>&aid=<{$content.aid}>&type=date"><img src="../images/filenew2.png"> <{$smarty.const._AM_ELE_DATEBOX}></a></p>
			<p><a href="ui.php?page=element&ele_id=new&fid=<{$content.fid}>&aid=<{$content.aid}>&type=subform"><img src="../images/filenew2.png"> <{$smarty.const._AM_ELE_SUBFORMEXPLAIN}></a></p>
			<p><a href="ui.php?page=element&ele_id=new&fid=<{$content.fid}>&aid=<{$content.aid}>&type=grid"><img src="../images/filenew2.png"> <{$smarty.const._AM_ELE_GRID}></a></p>
			<p><a href="ui.php?page=element&ele_id=new&fid=<{$content.fid}>&aid=<{$content.aid}>&type=derived"><img src="../images/filenew2.png"> <{$smarty.const._AM_ELE_DERIVED}></a></p>
			<p><a href="ui.php?page=element&ele_id=new&fid=<{$content.fid}>&aid=<{$content.aid}>&type=colorpick"><img src="../images/filenew2.png"> <{$smarty.const._AM_ELE_COLORPICK}></a></p>
			<{foreach item=customElement from=$content.customElements}>
			<p><a href="ui.php?page=element&ele_id=new&fid=<{$content.fid}>&aid=<{$content.aid}>&type=<{$customElement.type}>"><img src="../images/filenew2.png"> <{$customElement.name}></a></p>	
			<{/foreach}>
</div>

<div class="accordion-box-wide">
<h2><{$smarty.const._AM_ELE_MANAGINGELEFORM}><span id="switch-accordion" class="button">Forms</span></h2>
<p><{$smarty.const._AM_ELE_CLICKDRAGANDDROP}></p>
	<div id="sortable-list" >
		<div>
		<{include file="db:admin/ui-accordion.html" sectionTemplate="db:admin/form_elements_sections.html" sections=$content.elements name="-form"}>
<!-- 		<{include file="db:admin/ui-accordion.html" sectionTemplate="db:admin/form_elements_sections_list.html" sections=$content.listElements name="-list" class="hidden" style=display:none }>
 -->		
		</div>
		</div>
	</div>

</form>
<div style="clear: both;"></div>
<script type="text/javascript">
	$("#switch-accordion").click(function() {

		if($("#accordion-2-list").hasClass('hidden')==false){
			$("#accordion-2-list").toggleClass('hidden');  	  
   		}

   		$( "#accordion-2-form").toggle( "slide", { direction: "left" }, 1000);
   		$( "#accordion-2-list").toggle( "slide", { direction: "right" }, 1000 );


		if($("#accordion-2-list").hasClass('hidden')==true){
			$("#accordion-2-list").toggleClass('hidden');  	  
   		}
	
		buttonVal=$("#switch-accordion").text();
   		$("#switch-accordion").text(buttonVal=='Forms'? 'Lists' : 'Forms');
	});



$(".clonelink").click(function () {
	$("[name=cloneelement]").val($(this).attr('target'));
	$(".savebutton").click();
	return false;
});

$(".deleteelementlink").click(function () {
	var answer = confirm("<{$smarty.const._AM_ELE_CONFIRM_DELETE}>");
	if(answer) {
		$("[name=deleteelement]").val($(this).attr('target'));
		$("[name=reload_elements]").val(1);
		$(".savebutton").click();
	}
	return false;
});

$(".converttotextarea").click(function () {
	var answer = confirm("<{$smarty.const._AM_CONVERTTEXT_HELP}>");
	if(answer) 
{		$("[name=convertelement]").val($(this).attr('target'));
		$("[name=reload_elements]").val(1);
		$(".savebutton").click();
	}
	return false;
});

$(".converttotext").click(function () {
	var answer = confirm("<{$smarty.const._AM_CONVERTTEXTAREA_HELP}>");
	if(answer) {
		$("[name=convertelement]").val($(this).attr('target'));
		$("[name=reload_elements]").val(1);
		$(".savebutton").click();
	}
	return false;
});
$(".converttocheckbox").click(function () {
	var answer = confirm("<{$smarty.const._AM_CONVERT_RB_CB}>");
	if(answer) {
		$("[name=convertelement]").val($(this).attr('target'));
		$("[name=reload_elements]").val(1);
		$(".savebutton").click();
	}
	return false;
});

$(".converttocheckboxfromsb").click(function () {
	var answer = confirm("<{$smarty.const._AM_CONVERT_SB_CB}> WARNING: existing submissions from users will not be preserved!!");
	if(answer) {
		$("[name=convertelement]").val($(this).attr('target'));
		$("[name=reload_elements]").val(1);
		$(".savebutton").click();
	}
	return false;
});

$(".converttoradio").click(function () {
	var answer = confirm("<{$smarty.const._AM_CONVERT_CB_RB}>");
	if(answer) {
		$("[name=convertelement]").val($(this).attr('target'));
		$("[name=reload_elements]").val(1);
		$(".savebutton").click();
	}
	return false;
});

$(".savebutton").click(function () {
	$("[name=element-list-order]").val($("#accordion-2-list").sortable('serialize')); 
	$("[name=elementorder]").val($("#accordion-2-form").sortable('serialize')); 

});

$("#accordion-2-list").bind( "sortupdate", function(event, ui) {
  setDisplay('savewarning','block');
});

$("#accordion-2-form").bind( "sortupdate", function(event, ui) {
  setDisplay('savewarning','block');
});

</script>
